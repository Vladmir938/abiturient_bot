from .keyboards import study_programs_menu_keyboard  # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥–º–µ–Ω—é
from bot_app.keyboards import main_menu_keyboard  # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞

# --- –î–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –∏ —Å—Å—ã–ª–∫–∏ ---
PROGRAM_LINKS = {
    "bachelor": {
        "title": "–ë–∞–∫–∞–ª–∞–≤—Ä–∏–∞—Ç –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Ç–µ—Ç",
        "links": [
            ("–û—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%B1%D0%B0%D0%BA%D0%B0%D0%BB%D0%B0%D0%B2%D1%80%D0%B8%D0%B0%D1%82%20%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf"),
            ("–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%B1%D0%B0%D0%BA%D0%B0%D0%BB%D0%B0%D0%B2%D1%80%D0%B8%D0%B0%D1%82%20%D0%BE%D1%87%D0%BD%D0%BE-%D0%B7%D0%B0%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf"),
            ("–ó–∞–æ—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%B1%D0%B0%D0%BA%D0%B0%D0%BB%D0%B0%D0%B2%D1%80%D0%B8%D0%B0%D1%82%20%D0%B7%D0%B0%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf")
        ]
    },
    "master": {
        "title": "–ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞",
        "links": [
            ("–û—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%BC%D0%B0%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%B0%20%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf"),
            ("–û—á–Ω–æ-–∑–∞–æ—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%BC%D0%B0%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%B0%20%D0%BE%D1%87%D0%BD%D0%BE-%D0%B7%D0%B0%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf"),
            ("–ó–∞–æ—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%BC%D0%B0%D0%B3%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D1%83%D1%80%D0%B0%20%D0%B7%D0%B0%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf")
        ]
    },
    "postgraduate": {
        "title": "–ê—Å–ø–∏—Ä–∞–Ω—Ç—É—Ä–∞",
        "links": [
            ("–û—á–Ω–∞—è —Ñ–æ—Ä–º–∞",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%B0%D1%81%D0%BF%D0%B8%D1%80%D0%B0%D0%BD%D1%82%D1%83%D1%80%D0%B0%20%D0%BE%D1%87%D0%BD%D0%B0%D1%8F%20%D1%84%D0%BE%D1%80%D0%BC%D0%B0.pdf")
        ]
    },
    "spo": {
        "title": "–°—Ä–µ–¥–Ω–µ–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (–°–ü–û)",
        "links": [
            ("–ù–∞ –±–∞–∑–µ 9 –∫–ª–∞—Å—Å–æ–≤",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%A1%D0%9F%D0%9E%209.pdf"),
            ("–ù–∞ –±–∞–∑–µ 11 –∫–ª–∞—Å—Å–æ–≤",
             "https://entrant.zabgu.ru/abitur/02%20-%20%D0%9A%D0%A6%D0%9F/%D0%9A%D0%A6%D0%9F%20%D0%A1%D0%9F%D0%9E%2011.pdf")
        ]
    }
}


def show_study_programs_menu(bot, chat_id: int):
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é '–ü—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è'."""
    bot.send_message(chat_id, "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è:", reply_markup=study_programs_menu_keyboard())


def send_program_links(bot, chat_id: int, program_type_key: str):
    """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–≥—Ä–∞–º–º."""
    program_data = PROGRAM_LINKS.get(program_type_key)

    if not program_data:
        bot.send_message(chat_id, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –¥–∞–Ω–Ω–æ–º—É —Ç–∏–ø—É –ø—Ä–æ–≥—Ä–∞–º–º –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.")
        return

    title = program_data.get("title", "–ü—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è")
    links_list = program_data.get("links", [])

    if not links_list:
        bot.send_message(chat_id, f"–î–ª—è '{title}' —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã.")
        return

    message_text = f"üîó <b>{title}</b>\n\n"
    for link_name, link_url in links_list:
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º HTML –¥–ª—è —Å—Å—ã–ª–æ–∫, —Ç–∞–∫ –∫–∞–∫ Markdown –º–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å URL
        message_text += f'‚Ä¢ <a href="{link_url}">{link_name}</a>\n'

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ. –ö–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–¥–º–µ–Ω—é "–ü—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è" –æ—Å—Ç–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ–π.
    bot.send_message(chat_id, message_text, parse_mode='HTML', disable_web_page_preview=True)
    # –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –ø–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Å—ã–ª–æ–∫:
    # show_study_programs_menu(bot, chat_id)


def go_back_to_main_menu_from_sp(bot, chat_id: int):  # sp - study programs
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ '–ü—Ä–æ–≥—Ä–∞–º–º—ã –æ–±—É—á–µ–Ω–∏—è'."""
    bot.send_message(chat_id, "–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.", reply_markup=main_menu_keyboard())